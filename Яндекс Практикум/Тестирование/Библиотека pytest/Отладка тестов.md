### Проблема с выводом `print()`

- По умолчанию `pytest` **перехватывает** (captures) поток вывода.
    
- **Сообщения `print()` из успешно пройденных тестов не отображаются**; вывод виден **только** для упавших тестов (в разделе _Captured stdout call_).
    
- Чтобы видеть `print()` из всех тестов:
    
    - **`pytest -s`** или `pytest --capture=no` (подавляет перехват вывода),
        
    - **`pytest -v -s`** (более подробный отчёт + вывод `print()` прямо в процессе),
        
    - **`pytest -rP`** (стандартный отчёт, а в конце выводится блок с данными `print()` для пройденных тестов).
        

### Отладка с помощью Python Debugger (pdb)

- Позволяет **пошагово** выполнять код, просматривать/изменять значения переменных, останавливаться в нужном месте.
    
- Запускать можно несколькими способами:
    
    1. **`pytest --pdb`**: при ошибке сразу заходите в дебаг на строке `assert`.
        
    2. **`pytest --trace`**: в начале **каждого** теста запускается pdb (чаще комбинируют c `--lf`/`-x`).
        
    3. **Явная точка останова** в коде:
        
        ```python
        import pdb
        def test_something():
            ...
            pdb.set_trace()  # Начать отладку прямо тут
            ...
        ```
        
        Или используйте встроенную функцию `breakpoint()` (в современных версиях Python).
        

#### Основные команды pdb

- **`n` / `next`** — перейти к следующей строке **без** погружения в функции.
    
- **`s` / `step`** — шаг внутрь вызываемой функции (если есть).
    
- **`c` / `continue`** — продолжить выполнение до следующей точки останова или конца теста.
    
- **`j N` / `jump N`** — перейти к строке **N** в текущей функции (с ограничениями).
    
- **`p(some_var_or_expr)`** — вывести значение переменной/выражения.
    
- **`a` / `args`** — показать аргументы текущей функции.
    
- **`l` / `list`** — показать текущее окружение кода (несколько строк).
    
- **`q` / `quit`** — выйти из отладчика.
    

### Пример отладки

```python
import pdb

def integers_counter(data):
    integers_found = 0
    for item in data:
        if isinstance(item, int):
            integers_found += 1
    return integers_found

def test_counter():
    data = [False, 1.0, "some_string", 3, True, 1, [], False]
    pdb.set_trace()  # Точка останова здесь
    integers = integers_counter(data)
    assert integers == 2
```

1. Запустите `pytest`.
    
2. Выполнение остановится на `pdb.set_trace()`.
    
3. Используйте команды pdb (`n`, `s`, `p(...)`, т. д.), чтобы посмотреть, где появляется ошибка.
    

### Отладка в VS Code

1. Установите `pytest` в виртуальное окружение.
    
2. В VS Code переключитесь на **раздел TESTING** (иконка с колбой).
    
3. Нажмите **“Configure Python Tests”** → выберите **`pytest`**.
    
4. Укажите директорию с тестами.
    
5. После обнаружения тестов можно:
    
    - ставить **breakpoint** через GUI (точка слева от строки),
        
    - запускать тесты и отладку (Debug Tests) по отдельности или сразу все.
        

### Best practices

1. Для **временной** отладки в тестах используйте `print()` вместе с ключами:
    
    - `-s` (простой вывод),
        
    - `-v -s` (подробно + вывод),
        
    - `-rP` (в основном отчёте, но отдельным блоком).
        
2. Для **глубокой** отладки используйте встроенный `pdb` (или `breakpoint()`).
    
3. Осваивайте **интеграцию** с IDE (VS Code, PyCharm) для удобного графического режима.