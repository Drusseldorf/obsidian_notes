# GIT

## **Основные команды Git**

### **1. Отображение состояния репозитория**

- **`git status`**Показывает текущее состояние репозитория: изменённые, добавленные или неотслеживаемые файлы, а также статус индекса.

### **2. Добавление изменений в индекс**

- **`git add <file>`**Добавляет изменения конкретного файла в индекс для последующего коммита.
- **`git add .`**Добавляет все изменения в текущей директории в индекс.
- **`git add --all`**Аналог команды `git add .`, добавляет все изменения, включая вложенные каталоги.

### **3. Создание коммита**

- **`git commit -m "Message"`**Фиксирует изменения в репозитории с комментарием.
- **`git commit --amend -m "Message"`**Изменяет последний коммит: добавляет изменения и обновляет комментарий.

### **4. Отправка изменений в удалённый репозиторий**

- **`git push`**Отправляет локальные изменения (коммиты) в удалённый репозиторий.

### **5. Удаление файлов**

- **`git rm <file>`**Удаляет файл из индекса и рабочего каталога.
- **`git rm --cached <file>`**Удаляет файл из индекса, но оставляет его в рабочем каталоге (на диске).

### **6. Игнорирование файлов**

- Создайте файл **`.gitignore`** и добавьте в него шаблоны файлов/каталогов, которые нужно игнорировать. Пример содержимого файла `.gitignore`:
    
    ```
    # Игнорировать файл README.md
    README.md
    
    # Игнорировать все файлы с расширением .doc
    *.doc
    
    # Игнорировать каталог build
    build/
    ```
    

## **Создание и инициализация репозиториев**

### **Инициализация нового репозитория**

- **`git init`**
    
    Создаёт новый локальный репозиторий в текущей директории. Git начинает отслеживать изменения в этой папке, создавая скрытую директорию `.git`.
    
    **Пример:**
    
    ```bash
    cd /Dev/first_project
    git init
    ```
    
    После выполнения команды в директории создаётся скрытая папка `.git`, которая хранит метаданные репозитория.
    

---

## **Работа с удалёнными репозиториями на GitHub**

### **Создание репозитория через веб-интерфейс**

1. На сайте GitHub нажмите «+» → **New repository**.
2. Задайте имя , описание, видимость (Public/Private).
3. Установите флаг **Initialize this repository with a README**.
4. Нажмите **Create repository**.

После создания репозиторий будет доступен по адресу:

`https://github.com/<ваше_имя_пользователя>/<имя_репозитория>`.

---

### **Форк чужого репозитория**

- **Fork** (форк) — создание копии чужого репозитория в своём аккаунте.Применяется для работы с чужими проектами, чтобы сохранить оригинал и изменения отдельно.

**Шаги:**

1. Перейдите на страницу репозитория, который нужно форкнуть.
2. Нажмите кнопку **Fork**.
3. Репозиторий появится в вашем аккаунте и будет доступен для редактирования.

---

## **Клонирование репозиториев**

### **Клонирование репозитория**

- **`git clone <url>`**
    
    Копирует удалённый репозиторий на локальный компьютер, включая все файлы и историю изменений.
    
    **Пример:**
    
    ```bash
    git clone git@github.com:<ваше_имя_пользователя>/backend_test_homework.git
    ```
    
    После выполнения команды репозиторий будет скачан в текущую директорию.
    

---

## **Пример сценария работы**

1. Инициализация нового проекта:
    
    ```bash
    mkdir new_project
    cd new_project
    git init
    ```
    
2. Клонирование удалённого репозитория:
    
    ```bash
    cd /Dev
    git clone git@github.com:username/repository.git
    ```
    
3. Проверка содержимого клонированной папки:
    
    ```bash
    cd repository
    ls -a
    ```
    

## **Просмотр истории изменений**

### **Команда: `git log`**

- Показывает список всех коммитов в текущем репозитории. Для каждого коммита отображается:
    - Идентификатор (хеш) коммита.
    - Автор.
    - Дата.
    - Сообщение коммита.
    
    **Пример использования:**
    
    ```bash
    git log
    ```
    
    **Клавиша `Q`**: Прерывает просмотр лога, если информации много.
    

---

## **Просмотр изменений в коммите**

### **Команда: `git show <id_коммита>`**

- Показывает подробности конкретного коммита, включая изменения в коде (diff).
    
    **Пример использования:**
    
    ```bash
    git show abeccbd
    ```
    
- **Команда: `git show`**
    
    Показывает изменения последнего коммита.
    
    **Пример использования:**
    
    ```bash
    git show
    ```
    

---

## **Откат изменений**

### **Команда: `git reset --hard <id_коммита>`**

- Полностью сбрасывает проект к указанному коммиту, удаляя все незакоммиченные изменения и изменения в индексе.
    
    **Пример использования:**
    
    ```bash
    git reset --hard abeccbd
    ```
    
    ⚠️ **Важно:** Все незакоммиченные изменения будут потеряны.
    

---

### **Команда: `git reset HEAD`**

- Убирает изменения из индекса, но оставляет их в рабочей директории. Это полезно, если вы добавили изменения в индекс, но не хотите их коммитить.
    
    **Пример использования:**
    
    ```bash
    git reset HEAD
    ```
    

---

## **Пример сценария работы**

1. Посмотреть историю коммитов:
    
    ```bash
    git log
    ```
    
2. Просмотреть изменения в конкретном коммите:
    
    ```bash
    git show abeccbd
    ```
    
3. Вернуться к предыдущему коммиту:
    
    ```bash
    git reset --hard abeccbd
    ```
    

## **Базовая настройка Git**

### **Установка имени и email**

- **Команда: `git config --global user.name "Имя Фамилия"`**
    
    Устанавливает имя, отображаемое в коммитах.
    
- **Команда: `git config --global user.email "email@example.com"`**
    
    Устанавливает email, отображаемый в коммитах.
    
    **Проверка настроек:**
    
    ```bash
    git config --global user.name
    git config --global user.email
    ```
    

---

## **Настройка SSH-ключей для GitHub**

### **Создание SSH-ключа**

- **Команда: `ssh-keygen`**
    
    Генерирует пару SSH-ключей.
    
    **Процедура:**
    
    1. Сохраните ключи в папке по умолчанию (нажмите `Enter`).
    2. Установите пароль для ключей (по желанию).
- **Команда: `cat ~/.ssh/id_rsa.pub`**
    
    Показывает содержимое публичного ключа. Копируйте его для добавления в GitHub.
    

### **Добавление ключа в GitHub**

1. Перейдите в настройки аккаунта GitHub.
2. Выберите **SSH and GPG keys → New SSH key**.
3. Вставьте скопированный ключ в поле **Key** и нажмите **Add SSH key**.

# В Git есть несколько способов удалить коммит из ветки, в зависимости от того, какой именно коммит нужно удалить: последний, промежуточный или конкретный по идентификатору.

---

### Удалить последний коммит

### Способ 1: **Удалить коммит, сохранив изменения в рабочей директории**

Используйте команду `git reset --soft HEAD~1`, чтобы удалить последний коммит, сохранив файлы в рабочей директории и в индексе (они будут готовы к повторному коммиту):

```bash
bash
Копировать код
git reset --soft HEAD~1

```

### Способ 2: **Удалить коммит, но оставить изменения в рабочей директории**

Если хотите сохранить только изменения в рабочей директории (исключить из индекса):

```bash
bash
Копировать код
git reset --mixed HEAD~1

```

### Способ 3: **Удалить коммит и изменения в нем полностью**

Чтобы удалить коммит вместе со всеми изменениями:

```bash
bash
Копировать код
git reset --hard HEAD~1

```

---

### Удалить конкретный коммит (не последний)

### Способ 1: **Использовать интерактивный rebase**

1. Запустите интерактивный `rebase`:
    
    ```bash
    bash
    Копировать код
    git rebase -i HEAD~N
    
    ```
    
    Здесь `N` — количество коммитов от текущего HEAD, которые нужно включить в редактор (например, 5, если коммит находится в последних 5).
    
2. В редакторе найдите строку с коммитом, который хотите удалить, и замените `pick` на `drop`:
    
    ```sql
    sql
    Копировать код
    drop 123abc Commit message
    
    ```
    
3. Сохраните и закройте редактор. Git пересоберет историю, исключив указанный коммит.

### Способ 2: **Откатить конкретный коммит с помощью `git reset`**

Если вы знаете идентификатор коммита (например, `123abc`), выполните:

```bash
bash
Копировать код
git reset --hard <commit_hash>^

```

Это удалит все коммиты, начиная с указанного, но только если они идут последовательно от текущего HEAD.

---

### Удалить коммит, уже отправленный на удаленный репозиторий

Если коммит уже был отправлен на удаленный репозиторий, потребуется применить `--force` после удаления локально:

1. Удалите коммит локально (используя один из способов выше).
2. Затем выполните команду:
    
    ```bash
    bash
    Копировать код
    git push --force
    
    ```
    

⚠️ **Внимание:** Применение `--force` может создать конфликты для других разработчиков, работающих с этой веткой. Убедитесь, что это безопасно.

---

### Удалить коммит без изменения истории (revert)

Если вы хотите удалить коммит без изменения истории (чтобы он оставался в логе), выполните:

```bash
bash
Копировать код
git revert <commit_hash>

```

Это создаст новый коммит, который отменяет изменения, внесенные указанным коммитом.


### Что делать, если в репозиторий попали лишние файлы:

Если в репозитории на удалённом сервере окажется что-то лишнее (например, папки виртуального окружения или служебные папки редактора кода), воспользуйтесь этим алгоритмом (на примере _.vscode_):

```
# Добавить папку в игнор-лист гита
# командой из корневой директории проекта Dev/django_sprint3/
echo '.vscode' >> .gitignore
 
# Удалить папку из списка отслеживаемых файлов (staging area).
git rm -r --cached .vscode
 
# Зафиксировать изменения в новом коммите.
git commit -m 'Директория .vscode добавлена в gitignore'
 
# Отправить изменения. 
git push 
```