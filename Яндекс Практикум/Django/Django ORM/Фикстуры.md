## 1. Что такое фикстуры?

- Способ сохранения и переноса данных в удобном формате (обычно JSON) из одной базы в другую.
    
- Используются для резервного копирования данных, обмена и синхронизации.
    

## 2. Загрузка (loaddata)

1. **Подготовка**
    
    - Поместите файл с фикстурами (например, `db.json`) в папку с проектом, рядом с `manage.py`.
        
2. **Команда**
    
    ```
    python manage.py loaddata db.json
    ```
    
    - Django добавляет данные из фикстуры в БД, не удаляя уже имеющиеся записи.
        

## 3. Создание (dumpdata)

- Позволяет экспортировать данные из БД в файлы JSON, YAML и т.д. (по умолчанию — JSON).
    

### 3.1 Выгрузка всего проекта

```
python manage.py dumpdata -o db.json
```

### 3.2 Выгрузка одного приложения

```
python manage.py dumpdata ice_cream -o ice_cream.json
```

### 3.3 Выгрузка одной модели

```
python manage.py dumpdata ice_cream.icecream -o ice_cream_icecream.json
```

### 3.4 Исключение некоторых моделей

```
python manage.py dumpdata --exclude ice_cream.icecream -o without_ice_cream_icecream.json
```

### 3.5 Человекочитаемый формат (отступы)

```
python manage.py dumpdata --indent 2 -o indented_db.json
```

## 4. Особенности и подводные камни

1. **Кодировка на Windows**
    
    - При выгрузке может потребоваться ключ `-Xutf8`:
        
        ```
        python -Xutf8 manage.py dumpdata --indent 2 -o indented_db.json
        ```
        
2. **Встроенные таблицы Django**
    
    - При экспорте и импорте могут возникнуть конфликты с таблицей `contenttypes`. Если нужно передать данные между разными проектами, исключите эту таблицу:
        
        ```
        python manage.py dumpdata --exclude contenttypes -o db.json
        ```
        
    - Иногда нужно также исключить `auth.permission`.
        

## 5. Итог

- Фикстуры удобны для резервного копирования и переноса данных.
    
- `loaddata` загружает данные в существующую БД, `dumpdata` экспортирует в файл.
    
- Следите за совместимостью структуры БД и фикстур (миграции должны соответствовать).
    
- Избегайте конфликтов с системными таблицами (например, `contenttypes`) при переносе данных между разными проектами.