# 11.15 Достаём данные из БД. Схемы

Чтобы достать (выбрать) всех авторов из таблицы `author`, используется следующая команда:

```sql
SELECT * FROM author; 
```

1. `SELECT * FROM author;` — команда для выбора всех данных из таблицы `author`.
2. `*`— означает выбор всех колонок из таблицы.
3. В реальном продакшн-коде не рекомендуется использовать *,``так как это может привести к ненужному потреблению ресурсов и затрудняет сопровождение кода. Лучше явно указывать нужные колонки.

Если необходимо выбрать только конкретные поля (столбцы), можно сделать это так:

```sql
SELECT name, description FROM book;
```

1. Здесь указаны конкретные колонки (`name` и `description`), которые будут выбраны из таблицы `book`.

### Псевдонимы (алиасы)

Псевдонимы позволяют переименовывать колонки или таблицы в рамках одного запроса, чтобы ссылаться на них под другим именем.

Пример:

```sql
SELECT name AS book_name, description FROM book;
```

1. В результате выполнения этого запроса будет возвращена таблица с колонкой `book_name`, хотя в исходной таблице эта колонка называется `name`.

### Применение псевдонимов на практике

Допустим, нужно получить названия всех книг в верхнем регистре:

```sql
SELECT UPPER(name) FROM book;
```

1. Функция `UPPER()` преобразует строку в верхний регистр.
2. Однако колонка в результатах будет называться `upper`.

Чтобы получить более читабельное название колонки, можно использовать алиас:

```sql
SELECT UPPER(name) AS book_name FROM book;
```

1. Теперь колонка в результатах будет называться `book_name`.
2. Заметь, что слово `AS` не обязательно. Следующий вариант тоже сработает:

```sql
SELECT UPPER(name) book_name FROM book;
```

### Псевдонимы для таблиц

Когда в разных таблицах есть колонки с одинаковыми названиями, можно использовать псевдонимы для таблиц:

```sql
SELECT b.name AS book_name FROM book AS b;
```

1. `b` — это псевдоним для таблицы `book`.
2. Через псевдоним можно обращаться к колонкам этой таблицы.

### Аналог команды `SELECT * FROM table_name` в PostgreSQL:

```sql
TABLE <название таблички>;
```

1. Эта команда работает аналогично `SELECT * FROM table_name`.
2. К ней можно добавить сортировку, например:

```sql
TABLE <название таблички> ORDER BY name;
```

### Просто по приколу: как взять квадратный корень числа

В PostgreSQL квадратный корень можно взять с помощью:

```sql
SELECT |/225;
```

1. Символы `|/` визуально похожи на знак корня.

### Функции в PostgreSQL

- Функции всегда возвращают одно или несколько значений.
- Для вызова функции нужно указать скобки `()`.
- В функции можно передавать один или несколько аргументов.
- Можно писать свои функции для выполнения специфических задач.

### Схемы

- Схемы — это пространства имен, которые объединяют таблицы и другие сущности базы данных.
- По умолчанию создается схема `public`.

Если у вас несколько схем, и вы хотите достать данные из конкретной, можно указать схему в запросе:

```sql
SELECT name FROM public.book;
```

Также можно указать и имя базы данных:

```sql
SELECT name FROM rrom_db1.public.book;
```

1. Схемы можно использовать для логического разделения данных и для настройки прав доступа в базе данных.
2. PostgreSQL по умолчанию ищет в схемах, указанных в параметре конфигурации `search_path`. Чтобы узнать текущие схемы:

```sql
SHOW search_path;
```