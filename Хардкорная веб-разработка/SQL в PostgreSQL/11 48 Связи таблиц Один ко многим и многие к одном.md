# 11.48 Связи таблиц: Один ко многим и многие к одному

Связь таблиц «один ко многим» и «многие к одному» — это два взаимосвязанных типа отношений в реляционных базах данных.

### Пример: Связь книг и категорий

В нашей базе данных `rroom_db` три основные таблицы: книги, авторы и категории. Рассмотрим связь таблиц книг и категорий:

```sql
SELECT book_id, name, author_id, category_id
FROM book;
```

Результат:

| book_id | name | author_id | category_id |
| --- | --- | --- | --- |
| 1 | Тихий Дон | 1 | 1 |
| 2 | Python. К вершинам мастерства | 2 | 2 |
| 3 | Судьба человека | 1 | 1 |
| 4 | Капитанская дочка | 3 | 1 |
| 5 | Сказка о рыбаке и рыбке | 3 | 1 |
| 6 | Голова профессора Доуэля | 4 | 1 |
| 7 | Остров погибших кораблей | 4 | 1 |
| 8 | Путешествие к центру Земли | 5 | 1 |
| 9 | Дети капитана Гранта | 5 | 1 |
| 10 | Простой Python | NULL | NULL |

### Связь «многие к одному»

Каждая книга ссылается на одну категорию через `category_id`. Однако на одну категорию может ссылаться множество книг. Это и есть связь «многие к одному»: **много книг ссылаются на одну категорию**.

### Связь «один ко многим»

Со стороны категорий, **одна категория содержит много книг**, поэтому мы видим связь «один ко многим». Эта связь — обратная «многие к одному».

### Как достать книги с автором и категорией

Для выборки книг вместе с авторами и категориями можно использовать `JOIN` (или `LEFT JOIN`, если какие-то книги могут не иметь автора или категории):

```sql
SELECT
    b.name AS book,
    a.name AS author,
    bc.name AS category
FROM
    book b
JOIN
    author a USING (author_id)
JOIN
    book_category bc USING (category_id);
```

Этот запрос извлекает информацию о книгах, их авторах и категориях, основываясь на связи «один ко многим» между таблицами.