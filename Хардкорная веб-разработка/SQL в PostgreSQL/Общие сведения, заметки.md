# Общие сведения, заметки

SQL - деларативный язык программирования (декларируем, что мы хотим исполнить, типа говорим буквально). (пайтон - императивный, то есть говорим как именно нужно чтото исполнить)

В случае СУБД Постгрес есть понятие "Кластер". В контексте постгреса это НЕ относится к распределенной системе из нескольких серверов.
Кластер (в контексте постгрес) - это одна или больше баз данных, которые управляются одним экземпляром сервера баз данных постгрес

О PostgreSQL

```
	Это объекто реляционная СУБД с открытым исходным кодом

	Открытый код - можно легально ее использовать, не платить никому, и видеть как реализована под капотом СУБД

	Реляционная - данные организованы в таблицы, строки и столбцы. Эти таблицы могут быть связаны между собой с помощью ключей (первичных и внешних).

	Объектно.. - объектные концепции, такие как классы, объекты, наследование и методы. Это позволяет моделировать более сложные структуры данных и поведение, приближаясь к объектно-ориентированному программированию.

	поддерживает не только стандартные реляционные типы данных (например, числа, строки), но и более сложные, пользовательские типы данных, которые могут включать вложенные объекты, коллекции и другие сложные структуры.

	Отношения - таблицы
	кортеж - конкретная строка в таблице
	Атрибут - колонка таблицы, которая имеет имя и тип

```

Запуск сервиса

```bash
sudo service postgresql start
```

```
	Чтобы подключиться к хосту (адрес сервера постгреса) с юзером postgresq

	psql -h localhost -U postgres

	Сбросить пароль

	sudo passwd postgres (если пароль забыли \\ не знаем)

	Сменить текущего пользователя на postgres

	su - postgres

	После подключения через команду psql (консольный клиент для cli взаимодействия с сервером):

	Получить версию сервера постгреса:

	select version();
	
	Посмотреть все базы в psql:
	
	\l
	
	Переключиться на другую БД в psql
	
	\c db_name

	Создать пользователя при помощи которого мы будем подключяться с серверу БД
	rrom - пользователь
	пароль - 'mycoolp@ssword'

	CREATE ROLE rroom WITH LOGIN PASSWORD 'mycoolp@ssword';

	Теперь создадим БД для этого пользователя, назовем rrom_db

	CREATE DATABASE rroom_db
		WITH
		ENCODING='UTF8'
		LC_COLLATE='ru_RU.UTF-8'
		LC_CTYPE='ru_RU.UTF-8'
		owner rroom;

	(тут у меня была ошибка, Ошибка указывает на то, что кодировка новой базы данных не совместима с кодировкой базы данных-шаблона.
	ERROR:  new encoding (UTF8) is incompatible with the encoding of the template database (SQL_ASCII)
	HINT:  Use the same encoding as in the template database, or use template0 as template.		)

	Решение:
	явно указать нужно шаблон, а именно:

	CREATE DATABASE rroom_db1
		WITH
		ENCODING='UTF8'
		LC_COLLATE='ru_RU.UTF-8'
		LC_CTYPE='ru_RU.UTF-8'
		TEMPLATE template0
		owner rroom;

	Чтобы посмотреть, где лежат данные наших баз данных (если интересно), выполняем в psql:

	show data_directory;

```

Тулзяшечки — psql, pgcli, DBeaver, PyCharm

```
	postgresql - СУБД работает как сервер. То есть чтобы с ней работать нужно к ней подключится и отправлять ей запросы. Есть специльный протокол и есть клиентские программы, который этот протокол реализуют. Стандартный вариант - psql.

	Есть более удобные, и имеющие GUI.

	pgcli
		GUI нет, это CLI клиент для постгреса. Предлагается ставить через pip

		Подключаемся:
			pgcli -h 192.168.64.11 -U rroom -d rroom_db

		В чем прикол: имеет подсветку синтаксиса, выводит табличку красиво
		Есть еще какие то возомжности, о которых в видео не говорится
		Выйти: ctrl+d

	DBeaver
		имеет GUI. Запускаем прям на винде и подключаемся через localhost и указываем логин пароль (rroom / mycoolp@ssword / rroom_db (1))

		Обычно требуют jdbs драйвер, который качают и ставят сами

```