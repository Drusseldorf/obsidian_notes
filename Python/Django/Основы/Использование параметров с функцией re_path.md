# Использование параметров с функцией re_path

Owner: Андрей Королев
Last edited time: December 5, 2024 7:05 PM

### Определение параметров через `re_path`

Функция `re_path` в Django позволяет задавать параметры маршрута с помощью регулярных выражений.

---

### Шаг 1: Изменение представления

В файле **`views.py`** уберём параметры по умолчанию и оставим явную передачу параметров:

```python
def user(request, name, age):
    return HttpResponse(f'<h2>Имя: {name}, Возраст: {age}</h2>')
```

---

### Шаг 2: Настройка маршрутов с использованием регулярных выражений

В файле **`urls.py`** настроим маршрут для функции `user` через `re_path`:

```python
from django.urls import path, re_path
from blog import views

urlpatterns = [
    re_path(r'^user/(?P<name>\D+)/(?P<age>\d+)/', views.user),  # Регулярное выражение для параметров
]
```

- **Формат определения параметров**:
    - `(?P<name>\D+)`: параметр `name` соответствует только буквенным символам.
    - `(?P<age>\d+)`: параметр `age` соответствует числам.
    - `?P<>`: синтаксис для именования параметров регулярного выражения.

### Пример работы:

- **Запрос `http://127.0.0.1:8000/user/Tom/38/`**
    - `Tom` передаётся в параметр `name`.
    - `38` передаётся в параметр `age`.

---

### Шаг 3: Значения по умолчанию для параметров

Обновим функцию `user`, добавив значения по умолчанию:

```python
def user(request, name='Undefined', age=0):
    return HttpResponse(f'<h2>Имя: {name}, Возраст: {age}</h2>')
```

Добавим дополнительные маршруты в **`urls.py`**, чтобы обрабатывать запросы без параметров:

```python
urlpatterns = [
    re_path(r'^user/(?P<name>\D+)/(?P<age>\d+)/', views.user),  # Полный маршрут
    re_path(r'^user/(?P<name>\D+)/', views.user),               # Только name
    re_path(r'^user/', views.user),                            # Без параметров
]
```

---

### Порядок маршрутов

- **Более конкретные маршруты** (с большим количеством параметров) должны идти выше.
- Django обрабатывает маршруты сверху вниз, поэтому важно учитывать их порядок.

---

### Примеры запросов:

1. **`http://127.0.0.1:8000/user/Tom/38/`**:
    - Вывод: `Имя: Tom, Возраст: 38`.
2. **`http://127.0.0.1:8000/user/Tom/`**:
    - Вывод: `Имя: Tom, Возраст: 0` (подставляется значение по умолчанию для `age`).
3. **`http://127.0.0.1:8000/user/`**:
    - Вывод: `Имя: Undefined, Возраст: 0` (подставляются оба значения по умолчанию).

---

### Итоги

- **`re_path`** позволяет задавать параметры маршрутов через регулярные выражения.
- Синтаксис: `(?P<имя_параметра>регулярное_выражение)`.
- При необходимости можно задавать значения параметров по умолчанию.
- Порядок маршрутов имеет значение: сначала определяются более конкретные маршруты.