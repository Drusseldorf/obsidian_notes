### 1. Важность мобильных приложений

- Во всем мире насчитывается более **6,6 млрд** пользователей смартфонов;
- Рынок мобильных приложений огромен: **5,7 млн** приложений в основных магазинах (Google Play, App Store), многомиллиардные доходы;
- Развитие мобильных технологий ведёт к росту потребности в тестировании мобильных решений.

---

### 2. Мобильный ландшафт

Мобильную среду удобнее рассматривать через **три призмы**:

1. **Устройство**:
    - Размеры экрана, плотность пикселей (LDPI, HDPI и т. п.), ориентация экрана;
    - Операционные системы (Android, iOS, Windows Mobile) и их **версии** (фрагментация);
    - Аппаратные особенности: ОЗУ, ЦП, батарея, датчики (камера, GPS и т. д.).
2. **Приложение**:
    - Множество форм взаимодействия: жесты (нажатие, свайп, масштабирование);
    - **Типы приложений**:
        - **Нативные** (кроссплатформенные для Android/iOS),
        - **Мобильные веб-приложения** (через браузер),
        - **Гибридные** (HTML/JS в контейнере, напр. Cordova, React Native),
        - **PWA** (прогрессивные веб-приложения).
    - Хранение данных (локальная БД, кэш).
3. **Сеть**:
    - Варианты пропускной способности (2G, 3G, 4G, Wi-Fi),
    - Важна поддержка офлайн-режима/нестабильных соединений.

---

### 3. Архитектура мобильных приложений

- Схожа с классическим веб-приложением (всё тот же уровень сервисов, БД);
- Важное отличие — **мобильный UI** (с локальной БД, особые жесты, работа офлайн) и нюансы взаимодействия с устройством и сетью;
- Тестирование сервисов, БД схоже с веб (модульные, интеграционные, сквозные тесты), а мобильный UI добавляет специфические моменты.

---

### 4. Стратегия тестирования мобильных приложений

1. **Выбор устройств для тестирования**
    
    - Учесть целевой рынок, популярные ОС/модели, долю рынка версий Android/iOS, бюджет/специфику бизнес-модели;
    - Обычно 3–4 основных модели/версии ОС для охвата 85 % целевых пользователей.
    - При необходимости — реальные устройства или облачные фермы (AWS Device Farm, Sauce Labs и т. п.).
2. **Фулстек-подход** (как в веб-приложениях), но с учётом особенностей мобильного UI:
    
    - **Ручное исследовательское тестирование**: эмуляторы (Android Emulator, iOS Simulator) + реальные устройства;
    - **Автоматизация** на микро-/макроуровне (Appium, Espresso/XCUITest, тесты данных и т. д.);
    - **Тестирование данных** (локальная БД/кэш + общая БД, синхронизация офлайн/онлайн);
    - **Визуальное тестирование** (Appium + плагин images / Applitools Eyes);
    - **Безопасность** (MobSF, Qark) + общие принципы (OWASP Mobile Top 10);
    - **Производительность**:
        - время запуска, потребление процессора/памяти/батареи (Android Profiler, Appium API),
        - нестабильная/низкая пропускная способность сети (Emulator Network Settings, Monkey-стресс-тест).
    - **Доступность** (WCAG + iOS/Android инструменты: Accessibility Scanner, TalkBack, VoiceOver);
    - **Межфункциональные требования** (удобство использования, offline, прерывания (звонки, уведомления), установка/обновление, мониторинг и т. д.).

---

### 5. Упражнения по Appium

- **Appium** – кроссплатформенный инструмент автоматизации (Android/iOS), поддерживает нативные, веб-, гибридные приложения;
- Настройка:
    - Java + Maven + Node.js;
    - Android Studio (для эмуляторов);
    - Запуск сервера Appium → написание тестов (DesiredCapabilities), локаторы By.id и пр. как в Selenium;
    - Демо-пример тестирования `ApiDemos.apk`.
- Расширение:
    - **Плагин images** (Appium 2.x) для визуального сравнения (OpenCV).
    - Интеграция с CI, аналогична Selenium.

---

### 6. Дополнительные инструменты

- **Database Inspector** (Android Studio): проверка локальной БД приложения.
- **Monkey** (Android) — стресс-тест генерации случайных событий UI.
- **Нагрузочное тестирование сети** (Android Emulator) — имитировать 2G/3G/4G, уровень сигнала и т. д.
- **Appium Performance API** — получить данные о ЦП, памяти, батарее, сети, встроенные в Android dumpsys.
- **MobSF и Qark** — автоматизированное сканирование безопасности (статический/динамический анализ).
- **Accessibility Scanner** (Google) для проверки проблем доступности UI на Android.

---

### 7. «Пирамида» тестирования мобильных приложений

- Если в мобильном приложении много бизнес-логики, пирамида может выглядеть привычно: много тестов низкого уровня + немного UI.
- Если логики мало, но высока зависимость от жестов, аппаратных функций — возможно «перевёрнутая» пирамида (больше ручных/UI тестов).
- Выбор подхода зависит от **характера приложения**.

---

### 8. Ключевые выводы

1. **Значимость мобильных приложений** растёт, следовательно и потребность в качественном мобильном тестировании.
2. Мобильная среда сложнее: **десятки** факторов (устройства, ОС, сети, типы приложений). Это усложняет как разработку, так и тестирование.
3. **Стратегия тестирования** мобильных приложений использует все подходы фулстек-тестирования (от модульных до сквозных, от доступности до безопасности), но учитывает специфику: эмуляторы/симуляторы, реальные устройства, тесты в условиях ограниченных сетей, прерывания, жесты и т. п.
4. **Appium** – де-факто стандарт автоматизации UI для нативных/веб/гибридных приложений, плюс множество вспомогательных инструментов для производительности, данных, безопасности, доступности.
5. «**Пирамида тестирования**» может трансформироваться в мобильных проектах, иногда становясь «перевёрнутой» из-за ограниченной ценности модульных тестов и высокой важности UI/ручных проверок.
6. Важно **на ранних этапах** выбрать ключевые устройства/ОС, CI/облака для регресса, уделить внимание непрерывному получению обратной связи в QA.