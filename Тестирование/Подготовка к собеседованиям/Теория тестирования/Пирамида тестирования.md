![](Снимок%20экрана%202025-01-16%20153053.png)

**Пирамида тестирования** – описывает оптимальное соотношение различных типов тестов в проекте. Это группировка тестов по уровню детализации и их назначению. 
Пирамиду разбивают на **4 уровня** (снизу вверх), например, по ISTQB:

- модульное тестирование (юнит) (в самом низу, основания);
- интеграционное тестирование;
- системное тестирования;
- приемочное тестирование (вершина пирамиды).

Но **можно встретить** варианты, где **3 уровня**. В этой модели объединяют интеграционный и системный уровни:

- модульное тестирование (юнит);
- интеграционное тестирование (включает в себя системное);
- приемочное тестирование.
---

## Из чего состоит классическая пирамида

### 1. Юнит-тесты

- **Что тестируется**: Небольшие фрагменты кода (как правило, отдельные функции или методы).
- **Цель**: Проверить логику на самом базовом уровне. Убедиться, что каждая функция корректно обрабатывает входные данные и возвращает ожидаемый результат.
- **Причина, почему их так много**: Эти тесты быстрые, простые, запускаются часто (как правило, при каждом коммите или даже раньше – во время локальной разработки), и они дают быструю обратную связь об ошибках в коде.
- **Подходы**: Моки (mock), стабы (stubs), фейки (fakes) и т.д. для изоляции тестируемого компонента от внешних зависимостей.

### 2. Интеграционные тесты

- **Что тестируется**: Взаимодействие нескольких модулей или сервисов между собой.
- **Цель**: Проверить, что модули правильно интегрированы, корректно передают данные и вместе работают так, как ожидается.
- **Особенности**: Интеграционные тесты обычно медленнее юнит-тестов, т.к. нужно «поднимать» дополнительные сервисы или базы данных. Часто используют docker-контейнеры, тестовые окружения и т.д.

### 3. End-to-End (E2E) / Системные тесты

- **Что тестируется**: Полная цепочка работы приложения от начала до конца, в том числе пользовательский интерфейс (UI), базы данных, внешние API и т.д.
- **Цель**: Убедиться, что пользователь получает ожидаемое поведение, а вся система работает целиком «как нужно».
- **Почему их мало**: Они самые дорогие в написании и поддержке, требуют большого количества ресурсов (окружения, интеграций), долго выполняются. Слишком обширное покрытие E2E-тестами может замедлить процесс разработки и собрать тесты, поддерживать которые сложно.
---

## Почему это именно пирамида?

1. **Основание широкое** – в основе большое количество юнит-тестов, так как это самый дешёвый и быстрый способ проверять корректность кода.
2. **Вершина узкая** – E2E-тесты занимают небольшую часть, потому что их выполнение требует много ресурсов, а из-за сложности сценариев они сложнее и дороже в поддержке.
3. **Высота слоёв указывает на сложность** – чем выше по пирамиде, тем тесты «сложнее» и «медленнее».

Таким образом, пирамида подчёркивает, что **надёжная база (много стабильных юнит-тестов)** – это фундамент успешной стратегии тестирования. А верхушка пирамиды (небольшое количество дорогостоящих E2E-тестов) даёт уверенность в том, что вся система «собрана» правильно.